[moveivr-click2call]
exten => _X.,1,NoOp(--- MOVEIVR PROCESS CLICK2CALL CallRecord = ${CALL-RECORD} To: ${TO-NUMBER} Connect_ext: ${CONNECT-EXT} ---)
exten => _X.,n,Set(DIALOPTIONS=g)
exten => _X.,n(moh-prepare),AGI(moveivr.php,CLICK2CALL-MOH)
;exten => _X.,n,Set(PROVIDER=vitel-outbound)
;exten => _X.,n,Set(DIALSTRING=SIP/${EXTEN}@${PROVIDER})
exten => _X.,n,Set(DIALSTRING=SIP/${EXTEN})
exten => _X.,n,GotoIf($["${CALL-RECORD}" == "Y"]?monitor:dial)
exten => _X.,n(monitor),MixMonitor(${CHANNEL(peername)}_${EXTEN}_${UNIQUEID}.wav,b)
exten => _X.,n(dial),Dial(${DIALSTRING},30,${DIALOPTIONS})

exten => h,1,NoOp(--- call end ---)
exten => h,n,AGI(moveivr.php,CLICK2CALL-CDR)
exten => h,n,Hangup()